webpackJsonp([1],{"/AuU":function(t,n){},"9M+g":function(t,n){},D4uH:function(t,n,e){"use strict";function o(){return"fa-"+(a++).toString(16)}function i(t){e("/AuU")}var s={},r={name:"icon",props:{name:{type:String,validator:function(t){return t?t in s||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlesase make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?s[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,n=t.width,e=t.height;return Math.max(n,e)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,n={};return t=t.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,function(t,e){var i=o();return n[e]=i,' id="'+i+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,e,o,i){var s=e||i;return s&&n[s]?"#"+n[s]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(n){n.outerScale=t.normalizedScale});var n=0,e=0;this.$children.forEach(function(t){n=Math.max(n,t.width),e=Math.max(e,t.height)}),this.childrenWidth=n,this.childrenHeight=e,this.$children.forEach(function(t){t.x=(n-t.width)/2,t.y=(e-t.height)/2})}},register:function(t){for(var n in t){var e=t[n];e.paths||(e.paths=[]),e.d&&e.paths.push({d:e.d}),e.polygons||(e.polygons=[]),e.points&&e.polygons.push({points:e.points}),s[n]=e}},icons:s},a=870711,c=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(n,o){return e("path",t._b({key:"path-"+o},"path",n,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(n,o){return e("polygon",t._b({key:"polygon-"+o},"polygon",n,!1))}):t._e(),t._v("\b\n    "),t.icon&&t.icon.raw?[e("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},u=[],l={render:c,staticRenderFns:u},p=l,h=e("VU/8"),d=i,f=h(r,p,!1,d,null,null);n.a=f.exports},Jmt5:function(t,n){},NHnr:function(t,n,e){"use strict";function o(t){e("keGr")}function i(t){e("QFUS")}function s(t){e("T8gA")}Object.defineProperty(n,"__esModule",{value:!0});var r=e("7+uW"),a={name:"app"},c=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},u=[],l={render:c,staticRenderFns:u},p=l,h=e("VU/8"),d=o,f=h(a,p,!1,d,null,null),v=f.exports,g=e("/ocq"),w=e("//Fk"),m=e.n(w),y=[{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"cycle",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"volume",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"countdown",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"sequence",type:"uint256"}],name:"validate",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}],b=e("Zrlr"),k=e.n(b),x=e("wxAW"),I=e.n(x),_=function(){function t(n,e){k()(this,t),this.protocolInstance=n,this.protocolAddress=e}return I()(t,[{key:"version",value:function(){var t=this;return new m.a(function(n,e){t.protocolInstance.version(function(t,o){if(t)e(t);else{var i=o.toNumber();n(i)}})})}},{key:"countdown",value:function(){var t=this;return new m.a(function(n,e){t.protocolInstance.countdown(function(t,o){if(t)console.warn("error getting countdown value: "+t),e(t);else{var i=o.toNumber();n(i)}})})}},{key:"initialize",value:function(t){var n=this;return new m.a(function(e,o){web3.eth.sendTransaction({to:n.protocolAddress,value:t},function(t,n){t?(console.warn("protocol execution error: "+t),o(t)):(console.log("successfully executed the protocol: "+n),e(n))})})}},{key:"cycle",value:function(){var t=this;return new m.a(function(n,e){t.protocolInstance.cycle(function(t,o){if(t)console.warn("error getting cycle value: "+t),e(t);else{var i=o.toNumber();console.log("cycle count: "+i),n(i)}})})}},{key:"protocolState",value:function(){var t=this;return this.cycle().then(function(n){return n>0?t.countdown().then(function(t){return t>0?"ACTIVE":"TERMINATED"}):"INACTIVE"})}},{key:"getBalance",value:function(t){var n=this;return new m.a(function(t,e){web3.eth.getBalance(n.protocolAddress,function(n,o){if(n)console.warn("error getting current reward value: "+n),e(n);else{var i=web3.fromWei(o.toNumber(),"ether")+" ETH";console.log("current reward: "+i),t(i)}})})}},{key:"countdownFormatted",value:function(){return this.countdown().then(function(t){var n=t/60|0,e=t%60;n=pad(n,2),e=pad(e,2);var o=t>0?n+":"+e:"ìã¥ìè≤ìçí:ìÑøìè±";return console.log("countdown formatted: "+o),o})}},{key:"executor",value:function(){var t=this;return new m.a(function(n,e){t.protocolInstance.executor(function(t,o){if(t)console.warn("error getting last executor: "+t),e(t);else{var i=o.toString();console.log("last executor: "+i),n(i)}})})}},{key:"volume",value:function(){var t=this;return new m.a(function(n,e){t.protocolInstance.volume(function(t,o){if(t)console.warn("error getting protocol volume: "+t),e(t);else{var i=web3.fromWei(o.toNumber(),"ether")+" ETH";console.log("protocol volume: "+i),n(i)}})})}},{key:"validate",value:function(t){var n=this;return new m.a(function(e,o){n.protocolInstance.validate(t,function(t,n){t?(console.warn("The input is invalid: "+t),o(t)):(console.log("The input is valid"),e(n))})})}},{key:"pad",value:function(t,n){for(var e=t+"";e.length<n;)e="0"+e;return e}}]),t}(),S=_,M={rinkeby:{v1:"0x35df88a99dd25da942d8d99d9344495b6857eec0",v2:"0xba7a129933519ab9aae0f97d5456b76e26fbf7f3"},ropsten:{v1:"0x018b4f94672f015aaA9454B398cb9A50981D88c7",v2:"0x9d1F64Df3019eea83D35C350a0FDA1f9563B7cFA"}},W=void 0,E=new m.a(function(t,n){if("undefined"!=typeof web3)web3=new Web3(web3.currentProvider),web3.version.getNetwork(function(e,o){switch(o){case"1":console.log("This is mainnet");break;case"2":console.log("This is the deprecated Morden test network.");break;case"3":console.log("This is the ropsten test network."),W=M.ropsten.v1;break;case"4":console.log("This is the rinkeby test network."),W=M.rinkeby.v1;break;default:console.log("This is an unknown network.")}if(!W)return n("Protocol is currently not deployed on this network");var i=web3.eth.contract(y).at(W);t(new S(i,W))});else{var e='Web3 is not supported in your browser. Did you install <a href="https://metamask.io/">MetaMask Plugin?</a>';alert(e),n(e)}}),q=E,A=e("7t+N"),T=e.n(A);window.jQuery=T.a,e("nNbt");var C={name:"flip-clock",props:["seconds"],mounted:function(){this.init_clock(),this.set_countdown(new Date)},created:function(){},data:function(){return{countdown:null}},methods:{set_countdown:function(t){if(!this.countdown||!this.countdown.running){var n=new Date;t=new Date(t);var e=t.getTime()+1e3*this.seconds,o=Math.round((e-n.getTime())/1e3);return o<0&&(o*=-1,!0),this.countdown.setTime(o),this.countdown.start()}},init_clock:function(){this.countdown=T()(".countdown").FlipClock({clockFace:"MinuteCounter",language:"en",autoStart:!1,countdown:!0,showSeconds:!0})}}},N=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0,!1,!1)},z=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"flip-clock"},[e("div",{staticClass:"countdown-wrapper"},[e("div",{staticClass:"countdown",attrs:{id:"countdown"}})])])}],F={render:N,staticRenderFns:z},D=F,H=e("VU/8"),$=i,B=H(C,D,!1,$,null,null),U=B.exports,L={data:function(){return{timer:{coundown:0,display:!1},sequenceInput:{display:!1,staticMessage:"",input:">: ",waiting:null,errorMessage:""},sendAmount:null,toasts:{displayError:!1},isExecutionSuccessful:!1,errorMessage:""}},methods:{countdown:function(){var t=this;return this.startWaiting("Loading SWAN protocol..."),q.then(function(t){return t.countdown()}).then(function(n){t.stopWaiting("Success"),t.timer.display=!0,t.timer.coundown=n}).catch(function(n){t.stopWaiting("Failure"),console.log(n)})},execute:function(){var t=this;this.startWaiting();var n=void 0,e=void 0;try{var o=this.sanitizeInput(this.sequenceInput.input);n=parseInt(o)||0,e=parseInt(this.sendAmount)||1}catch(t){return this.toasts.displayError=!0,void(this.sequenceInput.errorMessage="Input is not an integer")}q.then(function(t){return t.validate(n)}).then(function(n){if(n)return q.then(function(t){return t.initialize(e)}).then(function(){t.stopWaiting(),t.isExecutionSuccessful=!0});t.sequenceInput.errorMessage="Invalid Sequence!",t.toasts.displayError=!0,t.stopWaiting()}).catch(function(n){t.sequenceInput.errorMessage=n.toString(),console.error("Execution failed. "+n),t.toasts.displayError=!0,t.stopWaiting()})},protocolState:function(){q.then(function(t){return t.protocolState()}).then(function(t){console.log(t)}).catch(function(t){console.error(t)})},sanitizeInput:function(t){var n=/^>?:? ?(\d+)/,e=t.match(n);return e&&e[1]?e[1]:t},startWaiting:function(t){var n=this;t&&(this.sequenceInput.staticMessage.length>0&&(this.sequenceInput.staticMessage+="\n"),this.sequenceInput.staticMessage+=">: "+t,this.sequenceInput.waiting=setInterval(function(){n.sequenceInput.staticMessage+="."},500))},stopWaiting:function(t){this.sequenceInput.waiting&&(t&&(this.sequenceInput.staticMessage+="  "+t),clearInterval(this.sequenceInput.waiting),this.sequenceInput.waiting=null)},getStatistics:function(){var t=this;return this.startWaiting("Loading protocol state..."),q.then(function(t){return t.protocolState()}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading protocol balance..."),q.then(function(t){return t.getBalance()})}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading cycle number..."),q.then(function(t){return t.cycle()})}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading last executor ID..."),q.then(function(t){return t.executor()})}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading volume..."),q.then(function(t){return t.volume()})}).then(function(n){t.stopWaiting(n),t.startWaiting("Enter Sequence"),t.stopWaiting(""),t.sequenceInput.display=!0}).catch(function(n){t.stopWaiting("Error: "+n.toString())})}},created:function(){var t=this;this.countdown().then(function(){t.getStatistics()})},components:{"flip-clock":U}},P=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"protocol-vue"},[e("b-alert",{staticClass:"popup-alert",attrs:{variant:"danger",dismissible:"",show:t.toasts.displayError},on:{dismissed:function(n){t.toasts.displayError=!1}}},[t._v("\n    "+t._s(t.sequenceInput.errorMessage)+"\n    ")]),t._v(" "),e("b-alert",{staticClass:"popup-alert",attrs:{variant:"success",dismissible:"",show:t.isExecutionSuccessful},on:{dismissed:function(n){t.isExecutionSuccessful=!1}}},[t._v("\n    Execution Successful\n    ")]),t._v(" "),e("div",{staticClass:"text-success",attrs:{id:"protocol-component"}},[t.timer.display?e("flip-clock",{attrs:{seconds:t.timer.coundown}}):t._e(),t._v(" "),e("b-input-group",{staticClass:"protocol-input",staticStyle:{"max-width":"400px"},attrs:{left:"wei"}},[e("b-input",{staticClass:"bg-dark text-success border-dark",attrs:{id:"sendAmount",placeholder:"1"},model:{value:t.sendAmount,callback:function(n){t.sendAmount=n},expression:"sendAmount"}})],1),t._v(" "),e("br"),t._v(" "),e("b-form-textarea",{staticClass:"protocol-input bg-dark text-success border-dark",attrs:{"no-resize":!0,rows:7,disabled:"","max-rows":7},model:{value:t.sequenceInput.staticMessage,callback:function(n){t.$set(t.sequenceInput,"staticMessage",n)},expression:"sequenceInput.staticMessage"}}),t._v(" "),t.sequenceInput.display?e("b-form-textarea",{staticClass:"protocol-input bg-dark text-success border-dark active-input",attrs:{"no-resize":!0,rows:5,"max-rows":5},model:{value:t.sequenceInput.input,callback:function(n){t.$set(t.sequenceInput,"input",n)},expression:"sequenceInput.input"}}):t._e(),t._v(" "),e("b-button",{staticClass:"execute-button",attrs:{type:"submit",variant:"success"},on:{click:t.execute}},[t._v("Execute protocol")])],1)],1)},R=[],V={render:P,staticRenderFns:R},J=V,Q=e("VU/8"),j=s,G=Q(L,J,!1,j,"data-v-257cd4c5",null),O=G.exports;e("Jmt5"),e("9M+g");r.a.use(g.a);var Z=new g.a({routes:[{path:"/",name:"Protocol",component:O}]}),K=e("sCSS"),X=(e("Epmo"),e("D4uH"));e("t1aR");r.a.component("icon",X.a),r.a.config.productionTip=!1,r.a.use(K.a),new r.a({el:"#app",router:Z,template:"<App/>",components:{App:v}})},QFUS:function(t,n){},T8gA:function(t,n){},keGr:function(t,n){},t1aR:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.3bea166daffacaf1c461.js.map