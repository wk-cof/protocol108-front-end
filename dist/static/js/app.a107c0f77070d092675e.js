webpackJsonp([1],{"/AuU":function(t,n){},"0sKC":function(t,n){},"9M+g":function(t,n){},D4uH:function(t,n,e){"use strict";function o(){return"fa-"+(c++).toString(16)}function i(t){e("/AuU")}var a={},s={name:"icon",props:{name:{type:String,validator:function(t){return t?t in a||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlesase make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?a[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,n=t.width,e=t.height;return Math.max(n,e)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,n={};return t=t.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,function(t,e){var i=o();return n[e]=i,' id="'+i+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,e,o,i){var a=e||i;return a&&n[a]?"#"+n[a]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(n){n.outerScale=t.normalizedScale});var n=0,e=0;this.$children.forEach(function(t){n=Math.max(n,t.width),e=Math.max(e,t.height)}),this.childrenWidth=n,this.childrenHeight=e,this.$children.forEach(function(t){t.x=(n-t.width)/2,t.y=(e-t.height)/2})}},register:function(t){for(var n in t){var e=t[n];e.paths||(e.paths=[]),e.d&&e.paths.push({d:e.d}),e.polygons||(e.polygons=[]),e.points&&e.polygons.push({points:e.points}),a[n]=e}},icons:a},c=870711,r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(n,o){return e("path",t._b({key:"path-"+o},"path",n,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(n,o){return e("polygon",t._b({key:"polygon-"+o},"polygon",n,!1))}):t._e(),t._v("\b\n    "),t.icon&&t.icon.raw?[e("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},u=[],l={render:r,staticRenderFns:u},p=l,d=e("VU/8"),h=i,f=d(s,p,!1,h,null,null);n.a=f.exports},Jmt5:function(t,n){},NHnr:function(t,n,e){"use strict";function o(t){e("0sKC")}function i(t,n){for(var e=t+"";e.length<n;)e="0"+e;return e}function a(t){e("fQOa")}function s(t){e("OhHk")}function c(t){e("WaqF")}Object.defineProperty(n,"__esModule",{value:!0});var r=e("7+uW"),u={name:"app"},l=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},p=[],d={render:l,staticRenderFns:p},h=d,f=e("VU/8"),v=o,m=f(u,h,!1,v,null,null),g=m.exports,w=e("/ocq"),b=e("mvHQ"),y=e.n(b),_=e("//Fk"),x=e.n(_),S=[{constant:!0,inputs:[],name:"version",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"cycle",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"executor",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"volume",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"countdown",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"sequence",type:"uint256"}],name:"validate",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}],I="0x35df88a99dd25da942d8d99d9344495b6857eec0",E={countdown:null,countdownFormatted:null,cycle:null,initialize:null,protocolState:null,getBalance:null,executor:null,volume:null,validate:null};if("undefined"!=typeof web3){web3=new Web3(web3.currentProvider);var W=web3.eth.contract(S).at(I);E.version=function(){return new x.a(function(t,n){W.version(function(e,o){if(e)n(e);else{var i=o.toNumber();t(i)}})})},E.countdown=function(){return new x.a(function(t,n){W.countdown(function(e,o){if(e)console.warn("error getting countdown value: "+e),n(e);else{var i=o.toNumber();t(i)}})})},E.initialize=function(t){return new x.a(function(n,e){web3.eth.sendTransaction({to:I,value:t},function(t,o){t?(console.warn("protocol execution error: "+t),e(t)):(console.log("successfully executed the protocol: "+o),n(o))})})},E.cycle=function(){return new x.a(function(t,n){W.cycle(function(e,o){if(e)console.warn("error getting cycle value: "+e),n(e);else{var i=o.toNumber();console.log("cycle count: "+i),t(i)}})})},E.protocolState=function(){return E.cycle().then(function(t){return t>0?E.countdown().then(function(t){return t>0?"ACTIVE":"TERMINATED"}):"INACTIVE"})},E.getBalance=function(t){return new x.a(function(t,n){web3.eth.getBalance(I,function(e,o){if(e)console.warn("error getting current reward value: "+e),n(e);else{var i=web3.fromWei(o.toNumber(),"ether")+" ETH";console.log("current reward: "+i),t(i)}})})},E.countdownFormatted=function(){return E.countdown().then(function(t){var n=t/60|0,e=t%60;n=i(n,2),e=i(e,2);var o=t>0?n+":"+e:"ìã¥ìè≤ìçí:ìÑøìè±";return console.log("countdown formatted: "+o),o})},E.executor=function(){return new x.a(function(t,n){W.executor(function(e,o){if(e)console.warn("error getting last executor: "+e),n(e);else{var i=o.toString();console.log("last executor: "+i),t(i)}})})},E.volume=function(){return new x.a(function(t,n){W.volume(function(e,o){if(e)console.warn("error getting protocol volume: "+e),n(e);else{var i=web3.fromWei(o.toNumber(),"ether")+" ETH";console.log("protocol volume: "+i),t(i)}})})},E.validate=function(t){return new x.a(function(n,e){W.validate(t,function(t,o){t?(console.warn("The input is invalid: "+t),e(t)):(console.log("The input is valid"),n(o))})})}}else alert('Web3 is not supported in your browser. Did you install <a href="https://metamask.io/">MetaMask Plugin?</a>');var k=E,M=e("7t+N"),q=e.n(M);window.jQuery=q.a,e("nNbt");var C={name:"flip-clock",props:["seconds"],mounted:function(){this.init_clock(),this.set_countdown(new Date)},created:function(){},data:function(){return{countdown:null}},methods:{set_countdown:function(t){if(!this.countdown||!this.countdown.running){var n=new Date;t=new Date(t);var e=t.getTime()+1e3*this.seconds,o=Math.round((e-n.getTime())/1e3);return o<0&&(o*=-1,!0),this.countdown.setTime(o),this.countdown.start()}},init_clock:function(){this.countdown=q()(".countdown").FlipClock({clockFace:"MinuteCounter",language:"en",autoStart:!1,countdown:!0,showSeconds:!0})}}},N=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0,!1,!1)},F=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"flip-clock"},[e("div",{staticClass:"countdown-wrapper"},[e("div",{staticClass:"countdown",attrs:{id:"countdown"}})])])}],z={render:N,staticRenderFns:F},T=z,A=e("VU/8"),H=a,$=A(C,T,!1,H,null,null),B=$.exports,D={data:function(){return{timer:{coundown:0,display:!1},sequenceInput:{display:!1,staticMessage:"",input:">: ",waiting:null},sendAmount:null,toasts:{displayError:!1},isExecutionSuccessful:!1,errorMessage:""}},methods:{countdown:function(){var t=this;return this.startWaiting("Loading SWAN protocol..."),k.countdown().then(function(n){t.stopWaiting("Success"),t.timer.display=!0,t.timer.coundown=n}).catch(function(n){t.stopWaiting("Failure"),console.log(n)})},execute:function(){var t=this;this.startWaiting();var n=void 0,e=void 0;try{var o=this.sanitizeInput(this.sequenceInput.input);n=parseInt(o)||0,e=parseInt(this.sendAmount)||1}catch(t){return this.toasts.displayError=!0,void(this.errorMessage="Input is not an integer")}k.validate(n).then(function(n){if(t.toasts.displayError=!n,n)return k.initialize(e).then(function(){t.stopWaiting(),t.isExecutionSuccessful=!0});t.sequenceInput.state="invalid",t.stopWaiting()}).catch(function(n){console.error("Execution failed. "+n),t.errorMessage=n,t.toasts.displayError=!0,t.stopWaiting()})},protocolState:function(){k.protocolState().then(function(t){console.log(t)}).catch(function(t){console.error(t)})},sanitizeInput:function(t){var n=/^>?:? ?(\d+)/,e=t.match(n);return e&&e[1]?e[1]:t},startWaiting:function(t){var n=this;this.sequenceInput.staticMessage.length>0&&(this.sequenceInput.staticMessage+="\n"),this.sequenceInput.staticMessage+=">: "+t,this.sequenceInput.waiting=setInterval(function(){n.sequenceInput.staticMessage+="."},500)},stopWaiting:function(t){this.sequenceInput.waiting&&(this.sequenceInput.staticMessage+="  "+t,clearInterval(this.sequenceInput.waiting),this.sequenceInput.waiting=null)},getStatistics:function(){var t=this;return this.startWaiting("Loading protocol state..."),k.protocolState().then(function(n){return t.stopWaiting(n),t.startWaiting("Loading protocol balance..."),k.getBalance()}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading cycle number..."),k.cycle()}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading last executor ID..."),k.executor()}).then(function(n){return t.stopWaiting(n),t.startWaiting("Loading volume..."),k.volume()}).then(function(n){t.stopWaiting(n),t.startWaiting("Enter Sequence"),t.stopWaiting(""),t.sequenceInput.display=!0}).catch(function(n){t.stopWaiting("Error: "+y()(n))})}},created:function(){var t=this;this.countdown().then(function(){t.getStatistics()})},components:{"flip-clock":B}},R=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"protocol-vue"},[e("b-alert",{staticClass:"popup-alert",attrs:{variant:"danger",dismissible:"",show:t.toasts.displayError},on:{dismissed:function(n){t.toasts.displayError=!1}}},[t._v("\n    Invalid Sequence\n    ")]),t._v(" "),e("b-alert",{staticClass:"popup-alert",attrs:{variant:"success",dismissible:"",show:t.isExecutionSuccessful},on:{dismissed:function(n){t.isExecutionSuccessful=!1}}},[t._v("\n    Execution Successful\n    ")]),t._v(" "),e("div",{staticClass:"text-success",attrs:{id:"protocol-component"}},[t.timer.display?e("flip-clock",{attrs:{seconds:t.timer.coundown}}):t._e(),t._v(" "),e("b-input-group",{staticClass:"protocol-input",staticStyle:{"max-width":"400px"},attrs:{left:"wei"}},[e("b-input",{staticClass:"bg-dark text-success border-dark",attrs:{id:"sendAmount",placeholder:"1"},model:{value:t.sendAmount,callback:function(n){t.sendAmount=n},expression:"sendAmount"}})],1),t._v(" "),e("br"),t._v(" "),e("b-form-textarea",{staticClass:"protocol-input bg-dark text-success border-dark",attrs:{"no-resize":!0,rows:7,disabled:"","max-rows":7},model:{value:t.sequenceInput.staticMessage,callback:function(n){t.$set(t.sequenceInput,"staticMessage",n)},expression:"sequenceInput.staticMessage"}}),t._v(" "),t.sequenceInput.display?e("b-form-textarea",{staticClass:"protocol-input bg-dark text-success border-dark active-input",attrs:{"no-resize":!0,rows:5,"max-rows":5},model:{value:t.sequenceInput.input,callback:function(n){t.$set(t.sequenceInput,"input",n)},expression:"sequenceInput.input"}}):t._e(),t._v(" "),e("b-button",{staticClass:"execute-button",attrs:{type:"submit",variant:"success"},on:{click:t.execute}},[t._v("Execute protocol")])],1)],1)},V=[],L={render:R,staticRenderFns:V},P=L,U=e("VU/8"),O=s,Q=U(D,P,!1,O,"data-v-7078da38",null),J=Q.exports,j={data:function(){return{protocolStats:{balance:"0 ETH",countdownFormatted:"",cycleNumber:null,protocolState:"INACTIVE",lastExecutor:"",volume:"?"}}},methods:{getStatistics:function(){var t=this;k.getBalance().then(function(n){t.protocolStats.balance=n}),k.protocolState().then(function(n){t.protocolStats.protocolState=n}),k.countdownFormatted().then(function(n){t.protocolStats.countdownFormatted=n}),k.cycle().then(function(n){t.protocolStats.cycleNumber=n}),k.executor().then(function(n){t.protocolStats.lastExecutor=n}),k.volume().then(function(n){t.protocolStats.volume=n})}},created:function(){this.getStatistics()}},K=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"text-success bg-dark"},[e("ul",[e("li",[t._v("Protocol state: "+t._s(t.protocolStats.protocolState))]),t._v(" "),e("li",[t._v("Countdown: "+t._s(t.protocolStats.countdownFormatted))]),t._v(" "),e("li",[t._v("Balance: "+t._s(t.protocolStats.balance))]),t._v(" "),e("li",[t._v("Cycle number: "+t._s(t.protocolStats.cycleNumber))]),t._v(" "),e("li",[t._v("Volume: "+t._s(t.protocolStats.volume))]),t._v(" "),e("li",[t._v("Last executor: "+t._s(t.protocolStats.lastExecutor))])]),t._v(" "),e("b-button",{attrs:{variant:"success"},on:{click:t.getStatistics}},[t._v("Refresh")])],1)},G=[],X={render:K,staticRenderFns:G},Y=X,Z=e("VU/8"),tt=c,nt=Z(j,Y,!1,tt,"data-v-c929c59e",null),et=nt.exports;e("Jmt5"),e("9M+g");r.a.use(w.a);var ot=new w.a({routes:[{path:"/",name:"Protocol",component:J},{path:"/details",name:"Details",component:et},{path:"/flip",name:"FlipClock",component:B}]}),it=e("sCSS"),at=(e("Epmo"),e("D4uH"));e("t1aR");r.a.component("icon",at.a),r.a.config.productionTip=!1,r.a.use(it.a),new r.a({el:"#app",router:ot,template:"<App/>",components:{App:g}})},OhHk:function(t,n){},WaqF:function(t,n){},fQOa:function(t,n){},t1aR:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.a107c0f77070d092675e.js.map